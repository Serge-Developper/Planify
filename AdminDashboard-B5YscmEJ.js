import{_ as $,r as s,f as F,e as b,g as P,c as i,a as t,h,F as w,b as q,i as x,t as d,d as E,w as n,v as y,j as c,n as N,o as r,k as G,l as I,E as z}from"./index-CjLwLzb8.js";const L={class:"admin-dashboard"},R={class:"top-bar"},H={class:"matieres-list"},J=["onClick"],K={class:"matiere-content"},O={type:"submit"},Q={class:"event-list"},W=["onClick"],X=["onClick"],Y={key:0,class:"modal"},Z=["disabled"],_={__name:"AdminDashboard",setup(ee){const A=["Anglais","Culture artistique","Culture numérique","Production graphique","Gestion de projet","Hébergement","Stratégies de communication","Système d'information","Développement web","Gestion de contenus","Ergonomie et accessibilité","Projet personnel et professionnel","Intégration","Production audio et vidéo","Expression, communication et rhétorique","Ecriture multimédia et narration","Représentation et traitement de l'information","Economie et droit du numérique"],v=s(A[0]),U=s(!1),u=s({username:"",password:"",role:"eleve",groupe:"A",year:"BUT1"}),m=s(""),k=s(!1),p=s([]),l=s({titre:"",date:"",heure:"",groupe:"A",type:"exam",matiere:A[0],year:"BUT1",description:""}),f=s(null),g=s(!1);F(async()=>{try{const a=await b.get("http://localhost:3000/events");p.value=Array.isArray(a.data)?a.data:Array.isArray(a.data.events)?a.data.events:[]}catch{p.value=[]}});function T(a){v.value=a,l.value.matiere=a}const V=P(()=>Array.isArray(p.value)?v.value==="Toutes"?p.value:p.value.filter(a=>a.matiere===v.value):[]);async function C(a,e){try{await b.delete(`http://localhost:3000/events/${a._id}`),p.value.splice(e,1)}catch{alert("Erreur lors de la suppression")}}function j(a,e){f.value=e,f.value!==-1&&(l.value={...p.value[f.value]})}async function M(){var a,e;try{(!l.value.groupes||l.value.groupes.length===0)&&(l.value.groupes=[l.value.groupe]);const o=await b.post("http://localhost:3000/events",l.value);p.value.push(o.data),l.value={titre:"",date:"",heure:"",groupe:"A",type:"exam",matiere:v.value,year:"BUT1",description:"",groupes:[]}}catch(o){alert("Erreur lors de l'ajout : "+(((e=(a=o.response)==null?void 0:a.data)==null?void 0:e.message)||o.message))}}async function D(){var a,e;m.value="",k.value=!0;try{await b.post("http://localhost:3000/users/register",u.value),m.value="Utilisateur ajouté avec succès !",u.value={username:"",password:"",role:"eleve",groupe:"A",year:"BUT1"}}catch(o){m.value=((e=(a=o.response)==null?void 0:a.data)==null?void 0:e.message)||"Erreur lors de l'ajout de l'utilisateur"}finally{k.value=!1}}function te(){}return(a,e)=>(r(),i("div",L,[t("div",R,[g.value?(r(),i("button",{key:1,onClick:e[1]||(e[1]=o=>g.value=!1),class:"switch-btn"},"Retour")):(r(),i("button",{key:0,onClick:e[0]||(e[0]=o=>g.value=!0),class:"switch-btn"},"Aller vers l'emploi du temps"))]),g.value?(r(),h(z,{key:1})):(r(),i(w,{key:0},[t("aside",H,[(r(),i(w,null,x(A,o=>t("button",{key:o,onClick:B=>T(o),class:G({selected:o===v.value})},d(o),11,J)),64)),t("button",{class:"add-user-btn",onClick:e[2]||(e[2]=o=>U.value=!0)},"Ajouter un utilisateur")]),t("main",K,[t("h2",null,d(v.value),1),t("form",{class:"event-form",onSubmit:E(M,["prevent"])},[n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.titre=o),placeholder:"Titre",required:""},null,512),[[y,l.value.titre]]),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.date=o),type:"date",required:""},null,512),[[y,l.value.date]]),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.heure=o),type:"time",required:""},null,512),[[y,l.value.heure]]),n(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.groupe=o),required:""},e[16]||(e[16]=[t("option",null,"Promo",-1),t("option",null,"A",-1),t("option",null,"A'",-1),t("option",null,'A"',-1),t("option",null,"B",-1),t("option",null,"B'",-1),t("option",null,'B""',-1)]),512),[[c,l.value.groupe]]),n(t("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.type=o),required:""},e[17]||(e[17]=[t("option",{value:"exam"},"Examen",-1),t("option",{value:"devoir"},"Devoir",-1)]),512),[[c,l.value.type]]),n(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.year=o),required:""},e[18]||(e[18]=[t("option",{value:"BUT1"},"1ère année",-1),t("option",{value:"BUT2"},"2ème année",-1),t("option",{value:"BUT3"},"3ème année",-1)]),512),[[c,l.value.year]]),n(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.description=o),placeholder:"Description (optionnelle)",rows:"3"},null,512),[[y,l.value.description]]),t("button",O,d(f.value!==null&&f.value!==-1?"Modifier":"Ajouter"),1)],32),t("ul",Q,[(r(!0),i(w,null,x(V.value,(o,B)=>(r(),i("li",{key:o._id||o.titre+o.date+o.heure},[t("b",null,d(o.titre),1),I(" - "+d(o.date)+" "+d(o.heure)+" - Groupe "+d(o.groupe)+" - Année "+d(o.year)+" ",1),t("button",{onClick:S=>j(o,B)},"Modifier",8,W),t("button",{onClick:S=>C(o,B)},"Supprimer",8,X)]))),128))])]),U.value?(r(),i("div",Y,[t("div",null,[e[22]||(e[22]=t("h3",{style:{color:"#000000"}},"Ajouter un utilisateur",-1)),t("form",{onSubmit:E(D,["prevent"]),style:{display:"flex","flex-direction":"column",gap:"12px","min-width":"320px"}},[n(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>u.value.username=o),placeholder:"Nom d'utilisateur",required:""},null,512),[[y,u.value.username]]),n(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>u.value.password=o),type:"password",placeholder:"Mot de passe",required:""},null,512),[[y,u.value.password]]),n(t("select",{"onUpdate:modelValue":e[12]||(e[12]=o=>u.value.role=o),required:""},e[19]||(e[19]=[t("option",{value:"eleve"},"Étudiant",-1),t("option",{value:"delegue"},"Délégué",-1),t("option",{value:"prof"},"Professeur",-1),t("option",{value:"admin"},"Admin",-1)]),512),[[c,u.value.role]]),n(t("select",{"onUpdate:modelValue":e[13]||(e[13]=o=>u.value.groupe=o),required:""},e[20]||(e[20]=[t("option",null,"Promo",-1),t("option",null,"A",-1),t("option",null,"A'",-1),t("option",null,'A"',-1),t("option",null,"B",-1),t("option",null,"B'",-1),t("option",null,'B""',-1)]),512),[[c,u.value.groupe]]),n(t("select",{"onUpdate:modelValue":e[14]||(e[14]=o=>u.value.year=o),required:""},e[21]||(e[21]=[t("option",{value:"BUT1"},"1ère année",-1),t("option",{value:"BUT2"},"2ème année",-1),t("option",{value:"BUT3"},"3ème année",-1)]),512),[[c,u.value.year]]),t("button",{type:"submit",disabled:k.value},"Ajouter",8,Z),t("button",{type:"button",onClick:e[15]||(e[15]=o=>U.value=!1)},"Annuler"),m.value?(r(),i("div",{key:0,style:N({color:m.value.includes("succès")?"green":"red"})},d(m.value),5)):q("",!0)],32)])])):q("",!0)],64))]))}},le=$(_,[["__scopeId","data-v-fb6da69a"]]);export{le as default};
