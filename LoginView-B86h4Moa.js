import{_ as v,r as l,c as u,a as o,w as d,b as f,v as p,t as g,d as w,u as _,o as c,e as x}from"./index-CjLwLzb8.js";const y={class:"login-container"},V={key:0,class:"error"},b={__name:"LoginView",setup(h){const t=l(""),a=l(""),n=l(""),i=_();async function m(){var r,e;try{const s=await x.post("http://localhost:3000/users/login",{username:t.value,password:a.value});localStorage.setItem("user",JSON.stringify(s.data)),s.data.role==="admin"?i.push("/admin"):i.push("/")}catch(s){n.value=((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur de connexion"}}return(r,e)=>(c(),u("div",y,[o("form",{class:"login-form",onSubmit:w(m,["prevent"])},[e[2]||(e[2]=o("h2",null,"Connexion",-1)),d(o("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),placeholder:"Identifiant"},null,512),[[p,t.value]]),d(o("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value=s),type:"password",placeholder:"Mot de passe"},null,512),[[p,a.value]]),e[3]||(e[3]=o("button",{type:"submit"},"Connexion",-1)),n.value?(c(),u("div",V,g(n.value),1)):f("",!0)],32)]))}},k=v(b,[["__scopeId","data-v-499e536b"]]);export{k as default};
